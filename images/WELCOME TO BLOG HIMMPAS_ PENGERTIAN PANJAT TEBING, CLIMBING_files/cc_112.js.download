(function(){var n="0.1.37",a,e="undefined",t=25,r=parseInt(1e3/t),i=a,o={"function":!0,object:!0},s={DEBUG_MODE:!1,counterID:"112",instanceID:"externalConf###Instanceid"},u=function(n){return typeof n!==e},A="HISTATS_CANVAS_DEBUG_ON";s.DEBUG_MODE=u(window[A])&&1==window[A];var c=function(){return s.instanceID},l="_HistatsCounterGraphics_",f,d=function(){return l+s.counterID},m=function(n){return!("string"!=typeof n||""==n)},v=function(){try{s.DEBUG_MODE&&u(console)&&console.log.apply(this,arguments)}catch(n){}},h=function(e,t){var o=e||{};try{var A=function(n){var a="autostart";return"undefined"!=typeof n[a]&&n[a]===!0},c={ANIMATION_RUNNING_STATUS:!0,ANIMATION_STARTED:!1,AUTOSTART:A(o),_STOPPED:!1,INSTANCE_ID:"-"+parseInt(1e4*Math.random())},l=function(){return c.INSTANCE_ID},m=100,h=1,C=function(){return t.document},b=function(n){return u(n)&&!!C().getElementById(n)},p=function(n){i=t.setTimeout(n,r)},w=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||t.oRequestAnimationFrame||p,g=t["Date"]||{},B=function(n,a){for(var e in n)a.hasOwnProperty(e)&&(a[e]=n[e])};o.getInstanceID=l;var T=d();o.IS_HISTATS_CANVAS=!0,o.globalObjectName=T,o.$window=t;var x=function(n){return b(n)?C().getElementById(n):a},O={w:0,h:0,yBase:0,xBase:0,hasShadow:!1,hasLabel:!1,shadowOffsetX:2,shadowOffsetY:2,shadowBlur:1,doMouseOverOut:1},y={msLastFrameDrawn:0,msPerFrame:r,frameCounter:0,isInAnimationTransition:!1,animation_duration_inFrames:20,waitframesBetweenTwoAnimations:80,framesBetweenTwoAnimations:100,currentLoopFrame:0,autoTriggerTextChange_onFrame:a,customization:{}},S={domCanvasObject:null,canvas2dContext:null,canvasProperties:O},I=function(){var n={},e=n.hasOwnProperty,t=0,r=0,i={blockMessages:!1,recordMessages:!1,messageLog:[],printMessages:!1,messagePassedCount:0,subscribersCount:0,topicsCount:0,_topics:n},o=function(a){return e.call(n,a)},s=function(a){return i.printMessages&&console.log(l(),"addTopic",a),r++,i.topicsCount++,r>50&&v(l(),"Lot of topics registered!",a),n[a]=[]},u=function(a){return n[a]},A=function(a,e,r){i.printMessages&&console.log(l(),"subscribe",a,e,r),i.recordMessages&&i.messageLog.push(["subscribe",a,e,r]),r=r||m,o(a)||s(a);var A=u(a).push({callback:e,priority:e})-1;return t++,i.subscribersCount++,t>50&&v(l(),"Lot of topics registered!",a),{remove:function(){delete n[a][A]}}},c=function(n,a){var e="no-topic-found";n!=e&&f(e,{topic:n,info:a})},f=function(e,t){return i.messagePassedCount++,i.printMessages&&console.log(l(),"publish",e,t),i.recordMessages&&i.messageLog.push(["publish",e,t]),i.blockMessages?void 0:o(e)?(n[e].slice().sort(function(n,a){return n.priority-a.priority}).forEach(function(n){n.callback(t!=a?t:{})}),void 0):(c(e,t),void 0)},d=function(n,a){w(function(){f(n,a)})};return{subscribe:A,publish:f,publishAsync:d,debugObj:i}}(),M=function(){return s.counterID},N=function(){var n="siteId";return o[n]=o[n]||0},_=function(){var n="main_div_name";return o[n]||"histats_counter_"+N()+"_"+M()},D=[],F=function(){return f=_(),f},P=function(){return F()+"_canvas"},k=function(){return"http://www.histats.com/viewstats/?sid="+N()+"&ccid="+M()},E=function(){t.location=k()},L=function(){if(1==S.canvasProperties.doMouseOverOut){var n=X().canvasProperties;n.yBase=2,n.xBase=2,n.shadowOffsetX=0,n.shadowOffsetY=0}X().domCanvasObject.style.cursor="pointer"},U=function(){if(1==S.canvasProperties.doMouseOverOut){var n=X().canvasProperties;n.yBase=0,n.xBase=0,n.shadowOffsetX=2,n.shadowOffsetY=2}},R=function(){var n=X(),a=n.canvasProperties,e=n.canvas2dContext;e.shadowOffsetX=a.shadowOffsetX,e.shadowOffsetY=a.shadowOffsetY,e.shadowBlur=a.shadowBlur,e.shadowColor="rgba(0,0,0,0.2)"},G=function(){return x(F())},H=function(){var n=!!G();return n},z=function(){try{if(!H())return I.publish("error",{msg:"validateDomcontainer not found"}),void 0;var n=G(),a=X().canvasProperties,e='<canvas id="'+P()+'" width="'+a.w+'" height="'+a.h+'" ></canvas>',r='<a href="'+k()+'" target="_blank">'+e+"</a>";n.innerHTML=r,X().domCanvasObject=x(P());var i=X().domCanvasObject;X().canvas2dContext=i.getContext("2d"),"addEventListener"in t?(i.addEventListener("mouseover",function(){L()}),i.addEventListener("mouseout",function(){U()})):i.onclick=function(){E()}}catch(o){v(l(),"drawCanvas",o)}},V=function(){try{if(c.ANIMATION_STARTED)return;if(c._STOPPED)return;I.publish("draw-callback-requested-reconfiguration",{}),I.publish("starting_pre",{context:o}),c.ANIMATION_STARTED=!0,I.publish("started",{context:o}),I.publish("drawcanvas_pre",{context:o}),z(),I.publish("drawcanvas_post",{context:o}),Z(),I.publish("animationLoop_started",{context:o})}catch(n){v(l(),"startNow",n,n.message)}},J=function(n,a,e){a.addEventListener?a.addEventListener(n,e,!1):a.attachEvent?a.attachEvent("on"+n,e):a[n]=e},Q=function(){try{I.publish("appendedStart",{context:o,type:"animFrame"}),w(V)}catch(n){v(l(),"startAsap",n.message,n)}},j=function(n,a){D.push({name:n,callback:a})},K=function(){},W=function(){D.forEach(function(n){n.callback(o.getCanvas2dContext(),y,X())})},Y=function(){u(i)&&t.clearTimeout(i)},Z=function(){c._STOPPED||w(function(){an(W),c.ANIMATION_RUNNING_STATUS&&Z()})};I.subscribe("setAnimationProperties",function(n){B(n,y)}),I.subscribe("draw-callback-publish-reconfiguration",function(n){try{n.canvasCallbacks.forEach(function(n){D.push({name:n.name,callback:n.cb,priority:n.priority})}),D=D.slice().sort(function(n,a){return n.priority-a.priority})}catch(a){v(l(),"animationLoop",a.message,a)}}),I.subscribe("configuration-changed",function(n){D=[],I.publish("draw-callback-requested-reconfiguration",{})});var q=function(n){var a=n!=c.ANIMATION_RUNNING_STATUS;return a&&(0==c.ANIMATION_RUNNING_STATUS&&1==n,1==c.ANIMATION_RUNNING_STATUS&&0==n&&Y(),c.ANIMATION_RUNNING_STATUS=n),a},X=function(){return S},$=function(){var n=!1;0==y.frameCounter&&I.publish("FIRST-FRAME",{});var a=g.now(),e=a-y.msLastFrameDrawn;if(e>y.msPerFrame){var t=e%y.msPerFrame;y.msLastFrameDrawn=a-t,n=!0}return n},nn=function(){if(!(y.animation_duration_inFrames<1)){var n=y.animation_duration_inFrames+y.waitframesBetweenTwoAnimations;y.currentLoopFrame=y.frameCounter%n;var a=0==y.currentLoopFrame,e=y.currentLoopFrame>=y.animation_duration_inFrames;a&&(y.isInAnimationTransition=!0,I.publish("drawing-triggered-animation-start",y)),e&&y.isInAnimationTransition&&(y.isInAnimationTransition=!1,I.publish("drawing-triggered-animation-end",y))}},an=function(n){var a=$();a&&(y.frameCounter++,nn(),n())},en=function(n){return n(o.getCanvas2dContext())},tn=function(){var n=17,a=2,e=1,t=X().canvasProperties,r=0;t.hasShadow&&(r=r+a+e),t.hasLabel&&(t.h=t.h+n),t.w=t.w+r,t.h=t.h+r},rn=function(n){B(n,X().canvasProperties),tn()};I.subscribe("setCanvasProperties",rn,10);var on=function(){o.onCanvas2dContext(function(n){var a=X().canvasProperties;n.clearRect(0,0,a.w,a.h),a.hasShadow&&R()})};I.subscribe("clear-canvas-rectangle",on,10);var sn=function(n,a){X().hasShadow&&(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,n.shadowColor="transparent")},un=function(n,e){e.autoTriggerTextChange_onFrame!==a&&e.currentLoopFrame==e.autoTriggerTextChange_onFrame&&I.publish("drawing-change-text",{})},An=function(n){I.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:sn,priority:14,name:"stopApplyingShadowOnCanvas"},{cb:un,priority:5,name:"autoUpdateText"}]})};I.subscribe("draw-callback-requested-reconfiguration",An,15),o.__CODE_VERSION=n,o.getCanvasObject=X,o.getCanvas2dContext=function(){return X().canvas2dContext},o.onCanvas2dContext=en,o.getXYCanvas=function(){return{x:X().canvasProperties.xBase,y:X().canvasProperties.yBase}},o.addDrawCallback=j,o.getCanvasProperties=function(){return X().canvasProperties},o.setCanvasProperties=function(n){for(var a in n)n.hasOwnProperty(a)&&(S.canvasProperties[a]=n[a])},o.updateCanvasProperties=function(n){o.setCanvasProperties(n(X().canvasProperties))},o.getAnimationFrames=function(){return y.frameCounter},o.getAnimationControl=function(){return y},o.setAnimationControl=function(n){for(var a in n)n.hasOwnProperty(a)&&(y[a]=n[a])},o.start=Q,o.changeRunningStatus=q,o.getRunningStatus=function(){return c.ANIMATION_RUNNING_STATUS},o.eventBus=I,o.getDebugMode=function(){return s.DEBUG_MODE},function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var e=n.statsText={},t={xBase:0,yBase:0},r=function(){return t},i=function(){var a=n.getXYCanvas();return t.xBase=a.x,t.yBase=a.y,t},o=[],s={stats_values:[],indexStatToShow:0,drawValueCallback:a,drawValueCallbackWithValue:a,drawMetricCallback:a},u=25,A=0,c=function(){return A%u==1},l=function(n){o=n};n.eventBus.subscribe("set-textbox-style",function(a){o=a,n.eventBus.publish("configuration-changed",{})}),n.eventBus.subscribe("canvas-drawValueFunction",function(n){"undefined"!=typeof n["transformationFunction"]&&(s.drawValueCallback=n["transformationFunction"])});function f(n,a,e,t){n=(n+"").replace(/[^0-9+\-Ee.]/g,"");var r=isFinite(+n)?+n:0,i=isFinite(+a)?Math.abs(a):0,o="undefined"==typeof t?",":t,s="undefined"==typeof e?".":e,u="",A=function(n,a){var e=Math.pow(10,a);return""+(Math.round(n*e)/e).toFixed(a)};return u=(i?A(r,i):""+Math.round(r)).split("."),u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(u[1]||"").length<i&&(u[1]=u[1]||"",u[1]+=new Array(i-u[1].length+1).join("0")),u.join(s)}var d=function(e){if(s.stats_values=e,s.drawValueCallback!=a){var t=e[0].value;s.drawValueCallbackWithValue=s.drawValueCallback(t)}n.eventBus.publish("configuration-changed",{})},m=function(){return s.stats_values},v=function(n){if(n===s.stats_values)return!1;if(typeof n==typeof[])for(var a in n)if(n.hasOwnProperty(a)&&typeof n[a]!=typeof{})return!1;return!0},h=function(){return n.globalObjectName+"_setValues"},C=function(){if(c()){var a=h();if("undefined"!=typeof n.$window&&"undefined"!=typeof n.$window[a]){var e=n.$window[a];v(e)&&d(e)}}},b=function(n){return(""+n).match(/^\s*[0-9]+\s*$/)?f(n,0,""," "):n},p=function(a,e){return function(t){t.shadowColor="transparent",t.font=a.name.font,t.textAlign=a.name.align,t.fillStyle=a.name.color,t.fillText(e.name,a.name.x+r().xBase,a.name.y+r().yBase),t.font=a.value.font,t.textAlign=a.value.align,t.fillStyle=a.value.color;var i=e.value;try{i=b(e.value)}catch(o){n.debug(o)}t.fillText(i,a.value.x+r().xBase,a.value.y+r().yBase)}},w=function(){s.indexStatToShow+=o.length,s.indexStatToShow>=s.stats_values.length&&(s.indexStatToShow=0)},g=!1;n.eventBus.subscribe("draw-hideText",function(n){g=!0},11),n.eventBus.subscribe("draw-unHideText",function(n){g=!1},11);var B=function(n){if(!g){var a,e,t=s.indexStatToShow,r=m(),i=r.length;r.length>o.length&&(i=o.length);for(var u=0;i>u&&(t>=r.length&&(t=0),r[t]);u++)a=o[u],e=r[t],p(a,e)(n),t++}},T=function(n,e){return A++,C(),i(),s.drawValueCallbackWithValue!=a?(s.drawValueCallbackWithValue(n),void 0):(B(n),void 0)},x=function(a){n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:T,priority:15,name:"show_stats_draw"}]})};n.eventBus.subscribe("draw-callback-requested-reconfiguration",x,11);var O=n.eventBus.subscribe("drawing-change-text",w,10);e.draw=T,e.setBoxes=l,e.setValues=d}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var e={main:"",source:a,loaded:!1};e.main="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFkAAAAqCAMAAADvYwfyAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAL9UExURQAAAAGPAACOAACMAAGPAAGPAACNAACOAACIAAGPAAKPAAGPAAKPAACOAAGRAACOAAKPAAGQAAKPAQCfAAB7AAC3AACKAACTAACQAACXAACVAAChAACZAACoAACqAACdAACOAACMAACIAACHAACEAACbAACjAACkAACcAACmAACFAACuAACvAACWAACSAACAAAB5AACnAACLAACyAAB3AACtAACPAACDAAC/AACrAACBAAB/AAB9AAC7AAB0AAByAACwAACzAADBAADEAABvAAC1AADDAAB2AAC8AAC5AABsAABzAADGAABxAAC+AADAAABrAABuAABoAADHAABqAABjAABnAABlAADLAAA5AADIAAA8AABEAABHAAA3AABYAABQAAC9AAF+AQF1AQE+AQBNAABiADOlMwClAAC4AACxAAC0ADOgMwF8AQC6ADOaMwFdAQBaAAA1AACsADHJMQC2ADPRMwBUAAFBATN1MwBhADOMMwBKADOCMzOtMzOqMwCRAACaAACCAC56LixnLDO/MyhuKCdhJw5rDgBSAABWAABwADOWMzOTMzNxMzOHMzPHMxHNESzKLAO7Ax3IHSTGJBa/FjOwMx3QHQurCyXNJRS5FCq+Kg3HDS/PLzO2MxJ1EjO7MyN2IySCJDOQMwBfADN5MzPMMwbBBhbEFinJKSnDKSbRJgOyAyq/KgOxAxauFiG4ITOpMyalJi+3LwPDAzOzMyezJxTQFCnOKQrOCjOjMzO4MxNPExpQGg1HDS9zLy+ELxdwFySKJDOdMyprKglnCQRJBB99HzOcMymDKQdSByNYIxdLFw2IDRxzHDOXMzF+MTPDMzN8MwGeAAzADAzEDBm/GQm4CSO9Iwy8DBaxFi/DLyy2LAOvAwGUABOnEw+zDx+hHx+0HymuKQmgCRymHBmfGQycDAabBhfKFx+JHxxqHBNeEw9+Dxd2Fx9oHx9wHxZWFgZxBh9gHwOBAxZrFgaIBhmPGSaPJgxCDC+NLyd5JwNMAwBtAOZVMUEAAAASdFJOUwCvTx/vvy9fD99/z58/72+P79TyClUAAAPdSURBVEjHY+AWIgtwsjJysbMx4APcMUVxkZHR0SkVMTGxsTWpqQkJneVd8YWFBUur0kLDw4IC/rl029slmxiI5CbpN6loKSuJKSpISOiJi+s1sDCyc+A0mbWGLJMbxKUkZRpVJaUkeHhxmMxVVRTX3tfXV1lZuWzZssuXL9aCQH9/fzUQLFmypLe3p+dCfn7+ySM5OTm709PTN22qr6vbvPnR8xcvGzXkhaVV77MyYTWZ3R5o8rFQkOtCArwCXXztve3cgQ4UsbHWtzIHO9FIUcEM6HspXUkZVaBZwtJq6jNnbni8ff6TZ0+BnAxhcVZmLCbz2hTFnekg1WRNQ1k5S9OHG7dsf6CeoSkrLMiPxWihorizh8gzWVvn3uw5WzZoysrJ6bJyYInCuF9t5JrsYOw4e93dmXLF2sIsGGlQIC0uuo8Ck11Fr7feLtbWUccwmsk+LrLlGCUmi966s/GeTpYhH5rRzEpxkWcOUWSy5+TVc+5lGcuiG80ZG3l2EWUm23pMnbPeONuQGzUaeQoiUyopNdlv6rq12aXCjKgBnRQZ2dJBqckWq25ml2bKcKGm6JTIfecpNnnFpNmlmVl8KLmRMT5y/wGKTfa/NuFGZl4GK0rRYRcZ3dJBsclOU1Zn5tlKIhdPHCwx0fsWUW7y1knT8myzOJHTB09odEVlEMUmu80tmWybqIocibwq0dHt7yk32XnWddtER06UzFIevb+ZCiYDHZ1ocYUdOQ4NolNa3lNuss+saYkW2aiOjk3Z20wFk19NTbRwkkJOHuzJKTFH31NucvC8qxZOxSh5nLOzYm+zF+Umz1hp4eQhhJzw2EUqYtpPUG7yxEkWTm7C7CiVVmjM8QMLKDY5at4KJzcHbmST2cRiYz5d/EyxyTOmOLn5owQHA1duTOyXUxSbPHEVkEYNDgbu8NjjRxdTanJEGZA2Ra0BOFjiY/+2naDU5DUr3ZwtWFArRDax8prTbYuTKTN5xxQgrYtW17KLdaWebjuVTJHJu3YCaXX01hi7WHxqwoeD7ygxOaJsq7OPNiNGy1QsLSHhbfPhXApMXjPX2ceDE6OVx8bpktAZ/6b/dRLZJs94BaSFMNu9zKzW8eVdBR8PHj73lTyTd8wC0vLYegL8LCbx8YUF3xZV//xx7jvpJu/aCaTVubB1AzgEjAyWAvspaR3nF//G3puomz5927b5QLBn4cJWILh06dIEIFi+fHlZWdk8oMk6jNg7L8w8LEkuaYR7QKB+ihqwzQ9sP+tkGQPbSHm2wJIf5PY8bpx9LnZGIXMR33/kmuwshKenyMEkwMoiRC5gAQAu8/Snle1PUgAAAABJRU5ErkJggg==";var t=function(a){var t=e.source=new Image;t.onload=function(){e.loaded=!0,n.eventBus.publish("background-image-loaded",e),n.eventBus.publish("configuration-changed",{})},t.src=e.main};n.eventBus.subscribe("FIRST-FRAME",t,5),n.image_base64_src=e}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var e=n.counter={};e.ID="112",e.properties={w:89,h:42,hasShadow:!0};var t=!1,r={backgroundImageObject:a},i={animation_duration_inFrames:20,autoTriggerTextChange_onFrame:10,waitframesBetweenTwoAnimations:110},o=[{name:{x:9,y:15,align:"left",color:"#ffffff",font:"11px Arial"},value:{x:78,y:36,align:"right",color:"#ffffff",font:"11px Arial"}}];n.eventBus.publish("set-textbox-style",o),n.eventBus.publish("setCanvasProperties",e.properties),n.eventBus.publish("setAnimationProperties",i);var s={alpha:{movementsPerFrame:1,min:0,max:100,cur:0}},u=function(n){var a=s;a.alpha.movementsPerFrame=(s.alpha.max-s.alpha.min)/(i.animation_duration_inFrames/2)};u(i.animation_duration_inFrames);var A=function(n){var a=n,e=0;if(!a.isInAnimationTransition)return e;var t=a.currentLoopFrame<a.animation_duration_inFrames/2,r=!t;return t&&(e=1),r&&(e=-1),e},c=function(n,a){var e=s,t=A(a);0==t?e.alpha.cur=e.alpha.min:l(n,t)},l=function(a,e){var t=s,i=n.getXYCanvas(),o=t.alpha.movementsPerFrame*e;t.alpha.cur=Math.max(Math.min(t.alpha.cur+o,t.alpha.max),t.alpha.min),a.save(),a.globalAlpha=t.alpha.cur/100,a.drawImage(r.backgroundImageObject.source,i.x,i.y),a.restore()},f=function(a,e){n.eventBus.publish("clear-canvas-rectangle",{});var t=n.getXYCanvas();a.drawImage(r.backgroundImageObject.source,t.x,t.y)},d=function(e){r.backgroundImageObject!=a&&n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:f,priority:10,name:"drawBackground"},{cb:c,priority:19,name:"drawAnimation"}]})};return n.eventBus.subscribe("draw-callback-requested-reconfiguration",d,13),n.eventBus.subscribe("background-image-loaded",function(n){r.backgroundImageObject=n},13),n}.call(o),c.AUTOSTART&&o.start()}catch(cn){}return o},C="base.js",b=window,p="_DEBUG_HISTATSCANVAS_RETURN_BUILDER";_value_RETURN_BUILDER=u(window[p])&&window[p]===!0,window[d()]=h,window["histats_canvascounters_"+C]=h}).call(this);